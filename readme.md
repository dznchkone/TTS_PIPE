# TTS бот для твича

Проект представляет собой Twitch бота для синтеза речи (Text-to-Speech) с использованием технологии Coqui XTTS v2.0.3. Бот позволяет пользователям в канале озвучивать текстовые сообщения через команды или награды за баллы.

## Основные особенности

- Поддержка русского языка с качественной синтезированной речью
- Интеграция с Twitch через библиотеку twitchio
- Система защиты от спама с кулдаунами для разных категорий пользователей
- Возможность клонирования голоса через референсные аудио файлы
- Кэширование сгенерированных аудио для повышения производительности
- Поддержка очереди задач для одновременной обработки сообщений
- Фильтрация мата и спама для обеспечения чистоты чата
- Автоматическая установка всех необходимых зависимостей через batch-скрипт

## Основные компоненты

1. __main.py__ - Основной скрипт бота с логикой обработки сообщений и синтеза речи
2. __config.py__ - Конфигурационный файл с настройками бота
3. __filters.py__ - Модуль фильтрации мата и спама
4. __install_dependencies.bat__ - Batch-скрипт для автоматической установки зависимостей
5. __.env.example__ - Пример конфигурационного файла

### Функциональность

- Команда `!tts` для озвучивания текста
- Команда `!ttsinfo` для получения информации о правилах использования
- Поддержка наград за баллы канала
- Различные кулдауны для стримеров, модераторов, подписчиков и обычных зрителей
- Автоматическое воспроизведение сгенерированной речи через sounddevice
- Система кэширования для ускорения повторного синтеза
- Защита от спама и матерных выражений

### Установка и запуск

1. Запустите `install_dependencies.bat` для установки всех зависимостей
2. Создайте `.env` файл на основе `.env.example`
3. Укажите свои Twitch данные
4. Запустите бота командой `python main.py`

### Требования

- Python 3.8 или выше
- Доступ к интернету для загрузки модели XTTS
- Звуковая карта для воспроизведения аудио
- Для GPU: CUDA 11.8 и соответствующие драйверы

### Батник для установки зависимостей TTS бота на базе Coqui XTTS v2.0.3. Батник автоматически

1. Проверяет наличие Python и pip
2. Обновляет pip до последней версии
3. Устанавливает PyTorch с поддержкой CUDA (если доступна) или fallback на CPU версию
4. Устанавливает Coqui TTS (основная библиотека синтеза речи)
5. Устанавливает Twitch библиотеки (twitchio) и дополнительные зависимости
6. Устанавливает библиотеки для Windows (pywin32)
7. Проверяет корректность установки всех библиотек

Батник также содержит инструкции по использованию бота после установки:

- Создание .env файла на основе .env.example
- Указание Twitch данных
- Запуск бота командой python main.py

## Дорожная карта

- __Разработка HTTP сервера__

  - Выбор фреймворка (FastAPI предпочтителен)
  - Создание API endpoint для генерации аудио
  - Реализация потоковой передачи

- __Интеграция с существующим TTS__

  - Адаптация текущей логики генерации
  - Обеспечение совместимости с новым интерфейсом
  - Оптимизация производительности

- __Реализация потокового аудио__

  - Поддержка потоковой передачи данных
